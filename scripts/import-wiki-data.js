const { MongoClient } = require('mongodb')

// å±¯äººæœWikiæ•°æ®
const wikiData = {
  categories: [
    {
      name: 'å¼€å§‹ä½¿ç”¨',
      description: 'æ–°æ‰‹å…¥é—¨æŒ‡å—å’ŒåŸºç¡€è®¾ç½®',
      order: 1
    },
    {
      name: 'æ¸¸æˆåŠŸèƒ½',
      description: 'æœåŠ¡å™¨ç‰¹è‰²åŠŸèƒ½å’Œç³»ç»Ÿä»‹ç»',
      order: 2
    },
    {
      name: 'è§„åˆ™åˆ¶åº¦',
      description: 'æœåŠ¡å™¨è§„åˆ™å’Œç®¡ç†åˆ¶åº¦',
      order: 3
    },
    {
      name: 'APIæ–‡æ¡£',
      description: 'æŠ€æœ¯æ–‡æ¡£å’ŒAPIæ¥å£è¯´æ˜',
      order: 4
    }
  ],
  pages: [
    {
      title: 'ä»è¿™é‡Œå¼€å§‹',
      content: `# æ¬¢è¿æ¥åˆ°å±¯äººæœ

## æœåŠ¡å™¨ç®€ä»‹

å±¯äººæœæ˜¯ä¸€ä¸ªã€Šæˆ‘çš„ä¸–ç•Œã€‹ç”Ÿå­˜æœåŠ¡å™¨ï¼Œä¸“æ³¨äºä¸ºç©å®¶æä¾›**ç¨³å®šã€å‹å¥½ã€åˆ›æ„é©±åŠ¨**çš„ç”Ÿå­˜ç¯å¢ƒã€‚

### ğŸ“‹ åŸºæœ¬ä¿¡æ¯
- **åˆ›å»ºæ—¶é—´**ï¼š2025å¹´3æœˆ28æ—¥
- **åˆ›å§‹å›¢é˜Ÿ**ï¼šmc506lw(è€ä¸‡) Ã— alazeprt  
- **æ ¸å¿ƒç†å¿µ**ï¼šé€šè¿‡åä½œä¸è‡ªç”±æ¢ç´¢ï¼Œæ‰“é€ æ²‰æµ¸å¼ç”Ÿå­˜ä½“éªŒ

### ğŸ¯ æœåŠ¡å™¨ç›®æ ‡
- ä¸ºç©å®¶æä¾›**ç¨³å®šã€å‹å¥½ã€åˆ›æ„é©±åŠ¨**çš„ç”Ÿå­˜ç¯å¢ƒ
- é¼“åŠ±ç©å®¶é€šè¿‡å»ºç­‘ã€å†’é™©ã€ç¤¾ç¾¤äº’åŠ¨ï¼Œå»ºç«‹å½’å±æ„Ÿ

### ğŸ“± è”ç³»æ–¹å¼
- **å®˜æ–¹QQç¾¤**ï¼š1043492617
- ç©å®¶å¯ä»¥åœ¨ç¾¤å†…@ç®¡ç†å‘˜æäº¤å»ºè®®

## å¿«é€Ÿå…¥é—¨

### 1. æœåŠ¡å™¨è¿æ¥
- **Javaç‰ˆåœ°å€**ï¼šplay.506521.xyz
- **åŸºå²©ç‰ˆåœ°å€**ï¼šbedrock.506521.xyz
- **ç«¯å£**ï¼š19132

### 2. åŸºç¡€å‘½ä»¤
- \`/spawn\` - å›åˆ°ä¸»åŸ
- \`/home\` - å›åˆ°å®¶
- \`/sethome [åç§°]\` - è®¾ç½®å®¶
- \`/tpa [ç©å®¶å]\` - ä¼ é€è¯·æ±‚

### 3. æ–°æ‰‹ç¤¼åŒ…
æ–°ç©å®¶å¯ä»¥ä½¿ç”¨ \`/kit starter\` è·å–æ–°æ‰‹ç¤¼åŒ…ï¼ŒåŒ…å«ï¼š
- åŸºç¡€å·¥å…·å¥—è£…
- åˆå§‹é£Ÿç‰©
- å»ºç­‘ææ–™

## æœåŠ¡å™¨ç‰¹è‰²

### ğŸ® æ¸¸æˆåŠŸèƒ½
- **å‡äººç³»ç»Ÿ** - æŒ‚æœºåŠ©æ‰‹
- **ä¼ é€ç‚¹ç³»ç»Ÿ** - å¿«é€Ÿç§»åŠ¨
- **å›¾ç‰‡ç³»ç»Ÿ** - åˆ†äº«æˆªå›¾
- **ç‚¹æ­ŒåŠŸèƒ½** - éŸ³ä¹æ’­æ”¾
- **ç§°å·ç³»ç»Ÿ** - ä¸ªæ€§å±•ç¤º
- **ç®±å­å•†åº—** - ç»æµäº¤æ˜“

### ğŸ”« ç‰¹è‰²ç³»ç»Ÿ
- **æªæ¢°ç³»ç»Ÿ** - ç°ä»£æ­¦å™¨
- **è¶…å¤§è§†è·** - æ›´å¥½ä½“éªŒ
- **é¢å¤–é™„é­”** - å¢å¼ºè£…å¤‡

### ğŸ¯ å°æ¸¸æˆ
- ç‹¬ç«‹çš„å°æ¸¸æˆæœåŠ¡å™¨
- å¤šç§ä¼‘é—²å¨±ä¹æ¨¡å¼

## ç¤¾åŒºæ–‡åŒ–

å±¯äººæœè‡´åŠ›äºæ‰“é€ ä¸€ä¸ªå’Œè°å‹å¥½çš„æ¸¸æˆç¯å¢ƒï¼Œæ¬¢è¿æ‰€æœ‰çƒ­çˆ±ã€Šæˆ‘çš„ä¸–ç•Œã€‹çš„ç©å®¶åŠ å…¥æˆ‘ä»¬çš„å¤§å®¶åº­ï¼`,
      slug: 'getting-started',
      categoryName: 'å¼€å§‹ä½¿ç”¨',
      tags: ['å…¥é—¨', 'æ–°æ‰‹', 'æŒ‡å—'],
      order: 1
    },
    {
      title: 'æœåŠ¡å™¨è§„åˆ™',
      content: `# æœåŠ¡å™¨è§„åˆ™

## åŸºæœ¬å‡†åˆ™

### ğŸš« ç¦æ­¢è¡Œä¸º
1. **æ¶æ„ç ´å**ï¼šæ•…æ„ç ´åä»–äººå»ºç­‘
2. **å·ç›—è¡Œä¸º**ï¼šæœªç»å…è®¸æ‹¿å–ä»–äººç‰©å“
3. **æ¶æ„PVP**ï¼šåœ¨å’Œå¹³åŒºåŸŸè¿›è¡Œæ¶æ„æ”»å‡»
4. **å¼€æŒ‚ä½œå¼Š**ï¼šä½¿ç”¨ä»»ä½•å½¢å¼çš„å¤–æŒ‚ç¨‹åº
5. **è¨€è¯­éªšæ‰°**ï¼šè¾±éª‚ã€æ­§è§†ã€æ¶æ„è¨€è®º

### âœ… é¼“åŠ±è¡Œä¸º
1. **å‹å¥½åˆä½œ**ï¼šä¸å…¶ä»–ç©å®¶å‹å¥½ç›¸å¤„
2. **åˆ›æ„å»ºç­‘**ï¼šå‘æŒ¥åˆ›é€ åŠ›å»ºé€ ä¼˜ç§€ä½œå“
3. **èµ„æºå…±äº«**ï¼šé€‚å½“å…±äº«èµ„æºï¼Œäº’å¸®äº’åŠ©
4. **ç§¯æå‚ä¸**ï¼šå‚ä¸æœåŠ¡å™¨æ´»åŠ¨å’Œç¤¾åŒºå»ºè®¾

## å¤„ç½šæªæ–½

### è­¦å‘Šç³»ç»Ÿ
- **é¦–æ¬¡è¿è§„**ï¼šå£å¤´è­¦å‘Š
- **äºŒæ¬¡è¿è§„**ï¼šä¹¦é¢è­¦å‘Š
- **ä¸‰æ¬¡è¿è§„**ï¼šä¸´æ—¶å°ç¦

### å°ç¦æ”¿ç­–
- **è½»å¾®è¿è§„**ï¼š1-7å¤©ä¸´æ—¶å°ç¦
- **ä¸¥é‡è¿è§„**ï¼š30å¤©ä»¥ä¸Šå°ç¦
- **æä¸¥é‡è¿è§„**ï¼šæ°¸ä¹…å°ç¦

### ç”³è¯‰æµç¨‹
å¦‚æœè®¤ä¸ºå¤„ç½šæœ‰è¯¯ï¼Œå¯ä»¥ï¼š
1. åœ¨QQç¾¤è”ç³»ç®¡ç†å‘˜
2. æä¾›ç›¸å…³è¯æ®
3. ç­‰å¾…ç®¡ç†å‘˜å®¡æ ¸
4. æ¥å—æœ€ç»ˆè£å†³

## å»ºç­‘è§„èŒƒ

### é¢†åœ°ä¿æŠ¤
- ä½¿ç”¨ \`/claim\` ä¿æŠ¤é‡è¦å»ºç­‘
- å°Šé‡ä»–äººçš„é¢†åœ°èŒƒå›´
- ä¸åœ¨ä»–äººé¢†åœ°é™„è¿‘æ¶æ„å»ºé€ 

### å»ºç­‘æ ‡å‡†
- å»ºç­‘åº”å½“ç¾è§‚ã€ç¬¦åˆä¸»é¢˜
- ä¸å»ºé€ æœ‰å®³ç¯å¢ƒçš„ç»“æ„
- åˆç†åˆ©ç”¨ç©ºé—´ï¼Œä¸è¿‡åº¦å ç”¨

## ç»æµè§„åˆ™

### äº¤æ˜“è§„èŒƒ
- è¯šä¿¡äº¤æ˜“ï¼Œä¸æ¬ºéª—ä»–äºº
- ä»·æ ¼åˆç†ï¼Œä¸æ¶æ„å„æ–­
- ä½¿ç”¨å®˜æ–¹è´§å¸ç³»ç»Ÿ

### å•†åº—ç®¡ç†
- ç®±å­å•†åº—éœ€è¦åˆç†å®šä»·
- å®šæœŸè¡¥å……å•†åº—åº“å­˜
- ä¸è®¾ç½®é™·é˜±å•†åº—

## æŠ€æœ¯è§„èŒƒ

### çº¢çŸ³æœºæ¢°
- çº¢çŸ³è®¾å¤‡éœ€è¦åˆç†è®¾è®¡
- ä¸åˆ¶é€ é€ æˆå¡é¡¿çš„æœºæ¢°
- å¤§å‹æœºæ¢°éœ€è¦ç”³è¯·

### è‡ªåŠ¨åŒ–å†œåœº
- å…è®¸åˆç†çš„è‡ªåŠ¨åŒ–è®¾æ–½
- ä¸å»ºé€ è¿‡åº¦æ¶ˆè€—èµ„æºçš„å†œåœº
- æ³¨æ„å¯¹æœåŠ¡å™¨æ€§èƒ½çš„å½±å“

è®°ä½ï¼šå±¯äººæœæ˜¯å¤§å®¶çš„å®¶ï¼Œè®©æˆ‘ä»¬ä¸€èµ·ç»´æŠ¤è¿™ä¸ªç¾å¥½çš„æ¸¸æˆç¯å¢ƒï¼`,
      slug: 'server-rules',
      categoryName: 'è§„åˆ™åˆ¶åº¦',
      tags: ['è§„åˆ™', 'åˆ¶åº¦', 'ç®¡ç†'],
      order: 1
    },
    {
      title: 'ä¼ é€ç‚¹ç³»ç»Ÿ',
      content: `# ä¼ é€ç‚¹ç³»ç»Ÿ

ä¼ é€ç‚¹ç³»ç»Ÿæ˜¯å±¯äººæœçš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œä¸ºç©å®¶æä¾›ä¾¿æ·çš„å¿«é€Ÿç§»åŠ¨æ–¹å¼ã€‚

## åŸºç¡€å‘½ä»¤

### è®¾ç½®å®¶
\`\`\`
/sethome [åç§°]
\`\`\`
åœ¨å½“å‰ä½ç½®è®¾ç½®ä¸€ä¸ªå®¶ï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªå®¶å¹¶å‘½åã€‚

### å›å®¶
\`\`\`
/home [åç§°]
\`\`\`
ä¼ é€åˆ°æŒ‡å®šçš„å®¶ï¼Œå¦‚æœä¸æŒ‡å®šåç§°åˆ™ä¼ é€åˆ°é»˜è®¤å®¶ã€‚

### æŸ¥çœ‹å®¶åˆ—è¡¨
\`\`\`
/homes
\`\`\`
æŸ¥çœ‹æ‰€æœ‰å·²è®¾ç½®çš„å®¶ã€‚

### åˆ é™¤å®¶
\`\`\`
/delhome [åç§°]
\`\`\`
åˆ é™¤æŒ‡å®šçš„å®¶ã€‚

## ä¼ é€è¯·æ±‚

### å‘é€ä¼ é€è¯·æ±‚
\`\`\`
/tpa [ç©å®¶å]
\`\`\`
å‘æŒ‡å®šç©å®¶å‘é€ä¼ é€åˆ°ä»–èº«è¾¹çš„è¯·æ±‚ã€‚

### ä¼ é€é‚€è¯·
\`\`\`
/tpahere [ç©å®¶å]
\`\`\`
é‚€è¯·æŒ‡å®šç©å®¶ä¼ é€åˆ°ä½ èº«è¾¹ã€‚

### æ¥å—è¯·æ±‚
\`\`\`
/tpaccept
\`\`\`
æ¥å—æœ€è¿‘æ”¶åˆ°çš„ä¼ é€è¯·æ±‚ã€‚

### æ‹’ç»è¯·æ±‚
\`\`\`
/tpdeny
\`\`\`
æ‹’ç»æœ€è¿‘æ”¶åˆ°çš„ä¼ é€è¯·æ±‚ã€‚

## å…¬å…±ä¼ é€ç‚¹

### ä¸»åŸä¼ é€
\`\`\`
/spawn
\`\`\`
ä¼ é€å›æœåŠ¡å™¨ä¸»åŸã€‚

### éšæœºä¼ é€
\`\`\`
/rtp
\`\`\`
éšæœºä¼ é€åˆ°é‡å¤–ï¼Œé€‚åˆå¯»æ‰¾æ–°çš„å»ºç­‘åœ°ç‚¹ã€‚

### ä¸–ç•Œä¼ é€
\`\`\`
/world [ä¸–ç•Œå]
\`\`\`
ä¼ é€åˆ°æŒ‡å®šä¸–ç•Œï¼Œæ”¯æŒï¼š
- \`overworld\` - ä¸»ä¸–ç•Œ
- \`nether\` - ä¸‹ç•Œ
- \`end\` - æœ«åœ°

## ä¼ é€é™åˆ¶

### å†·å´æ—¶é—´
- æ™®é€šä¼ é€ï¼š5ç§’å†·å´
- è·¨ä¸–ç•Œä¼ é€ï¼š10ç§’å†·å´
- éšæœºä¼ é€ï¼š30ç§’å†·å´

### å®‰å…¨æ£€æŸ¥
ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æŸ¥ç›®æ ‡ä½ç½®çš„å®‰å…¨æ€§ï¼š
- é¿å…ä¼ é€åˆ°å²©æµ†ä¸­
- é¿å…ä¼ é€åˆ°è™šç©º
- ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç©ºé—´

### è·ç¦»é™åˆ¶
- tpaè¯·æ±‚æ— è·ç¦»é™åˆ¶
- è®¾ç½®å®¶éœ€è¦åœ¨è‡ªå·±çš„é¢†åœ°å†…
- æŸäº›ç‰¹æ®ŠåŒºåŸŸç¦æ­¢ä¼ é€

## é«˜çº§åŠŸèƒ½

### ä¼ é€çŸ³
ä½¿ç”¨ä¼ é€çŸ³å¯ä»¥ï¼š
- å¿«é€Ÿä¼ é€åˆ°ç»‘å®šä½ç½®
- æ— éœ€è¾“å…¥å‘½ä»¤
- å¯ä»¥äº¤æ˜“ç»™å…¶ä»–ç©å®¶

### VIPç‰¹æƒ
VIPç©å®¶äº«æœ‰é¢å¤–ç‰¹æƒï¼š
- æ›´å¤šå®¶çš„æ•°é‡é™åˆ¶
- æ›´çŸ­çš„å†·å´æ—¶é—´
- ç‰¹æ®Šä¼ é€æƒé™

### ä¼ é€å†å²
\`\`\`
/back
\`\`\`
è¿”å›ä¸Šä¸€ä¸ªä½ç½®ï¼Œé€‚åˆè¯¯ä¼ é€æ—¶ä½¿ç”¨ã€‚

## æ³¨æ„äº‹é¡¹

1. **ä¼ é€å®‰å…¨**ï¼šä¼ é€å‰ç¡®è®¤ç›®æ ‡ä½ç½®å®‰å…¨
2. **è¯·æ±‚ç¤¼è²Œ**ï¼šå‘é€ä¼ é€è¯·æ±‚æ—¶ä¿æŒç¤¼è²Œ
3. **é¿å…æ»¥ç”¨**ï¼šä¸è¦é¢‘ç¹å‘é€ä¼ é€è¯·æ±‚
4. **é¢†åœ°ä¿æŠ¤**ï¼šå°Šé‡ä»–äººçš„ç§äººé¢†åœ°
5. **åº”æ€¥ä½¿ç”¨**ï¼šé‡åˆ°å±é™©æ—¶å¯ä»¥ä½¿ç”¨/spawné€ƒç”Ÿ

ä¼ é€ç³»ç»Ÿè®©å±¯äººæœçš„ä¸–ç•Œå˜å¾—æ›´åŠ ä¾¿åˆ©ï¼Œåˆç†ä½¿ç”¨è¿™äº›åŠŸèƒ½å¯ä»¥å¤§å¤§æå‡æ¸¸æˆä½“éªŒï¼`,
      slug: 'teleport-system',
      categoryName: 'æ¸¸æˆåŠŸèƒ½',
      tags: ['ä¼ é€', 'åŠŸèƒ½', 'å‘½ä»¤'],
      order: 1
    },
    {
      title: 'å‡äººç³»ç»Ÿ',
      content: `# å‡äººç³»ç»Ÿ

å‡äººç³»ç»Ÿå…è®¸ç©å®¶åœ¨ç¦»çº¿æ—¶ä¿æŒåœ¨çº¿çŠ¶æ€ï¼Œç»§ç»­è¿›è¡Œè‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚

## åŸºæœ¬æ¦‚å¿µ

å‡äººæ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„ç©å®¶è§’è‰²ï¼Œå¯ä»¥ä»£æ›¿çœŸå®ç©å®¶æ‰§è¡Œç®€å•çš„ä»»åŠ¡ï¼š
- ä¿æŒå†œåœºè¿è¡Œ
- ç»´æŒçº¢çŸ³æœºæ¢°
- å ä½å®ˆæŠ¤é‡è¦åŒºåŸŸ

## å‡äººå‘½ä»¤

### åˆ›å»ºå‡äºº
\`\`\`
/player [å‡äººå] spawn
\`\`\`
åœ¨å½“å‰ä½ç½®åˆ›å»ºä¸€ä¸ªå‡äººã€‚

### å‡äººç§»åŠ¨
\`\`\`
/player [å‡äººå] move forward
/player [å‡äººå] move back
/player [å‡äººå] move left
/player [å‡äººå] move right
\`\`\`

### å‡äººåŠ¨ä½œ
\`\`\`
/player [å‡äººå] attack continuous
/player [å‡äººå] use continuous
/player [å‡äººå] jump continuous
\`\`\`

### åˆ é™¤å‡äºº
\`\`\`
/player [å‡äººå] kill
\`\`\`

## ä½¿ç”¨åœºæ™¯

### å†œåœºç»´æŠ¤
- **åˆ·æ€ªå¡”**ï¼šä¿æŒåŒºå—åŠ è½½ï¼ŒæŒç»­äº§å‡ºæ€ªç‰©
- **å†œä½œç‰©å†œåœº**ï¼šè‡ªåŠ¨æ”¶å‰²å’Œç§æ¤
- **åŠ¨ç‰©å†œåœº**ï¼šç»´æŒåŠ¨ç‰©ç¹æ®–

### çº¢çŸ³æœºæ¢°
- **æ—¶é’Ÿç”µè·¯**ï¼šä¿æŒå¤æ‚çº¢çŸ³ç”µè·¯è¿è¡Œ
- **è‡ªåŠ¨åŒ–ç”Ÿäº§**ï¼šç»´æŒç”Ÿäº§çº¿æ­£å¸¸å·¥ä½œ
- **ä¿¡å·ä¼ è¾“**ï¼šä¿æŒé•¿è·ç¦»ä¿¡å·ä¼ è¾“

### åŒºåŸŸå®ˆæŠ¤
- **é¢†åœ°ä¿æŠ¤**ï¼šé˜²æ­¢é‡è¦åŒºåŸŸè¢«æ€ªç‰©ç ´å
- **å»ºç­‘ä¿æŠ¤**ï¼šç»´æŠ¤å¤§å‹å»ºç­‘å‘¨å›´ç¯å¢ƒ
- **èµ„æºç‚¹å®ˆæŠ¤**ï¼šä¿æŠ¤é‡è¦èµ„æºé‡‡é›†ç‚¹

## å‡äººé™åˆ¶

### æ•°é‡é™åˆ¶
- æ™®é€šç©å®¶ï¼šæœ€å¤š2ä¸ªå‡äºº
- VIPç©å®¶ï¼šæœ€å¤š5ä¸ªå‡äºº
- ç®¡ç†å‘˜ï¼šæ— é™åˆ¶

### åŠŸèƒ½é™åˆ¶
å‡äºº**ä¸èƒ½**æ‰§è¡Œçš„æ“ä½œï¼š
- èŠå¤©å’Œç¤¾äº¤
- å¤æ‚çš„å»ºé€ ä»»åŠ¡
- ä½¿ç”¨é«˜çº§å·¥å…·
- å‚ä¸PVPæˆ˜æ–—

### æ—¶é—´é™åˆ¶
- å•æ¬¡è¿è¡Œï¼šæœ€é•¿24å°æ—¶
- æ¯æ—¥ä½¿ç”¨ï¼šç´¯è®¡ä¸è¶…è¿‡8å°æ—¶
- å†·å´æ—¶é—´ï¼šåˆ é™¤åéœ€ç­‰å¾…30åˆ†é’Ÿ

## é«˜çº§åº”ç”¨

### å‡äººè„šæœ¬
\`\`\`
/player [å‡äººå] set_home
/player [å‡äººå] go_home
/player [å‡äººå] follow [ç©å®¶å]
\`\`\`

### å‡äººè£…å¤‡
å‡äººå¯ä»¥è£…å¤‡ï¼š
- å·¥å…·ï¼ˆé•ã€æ–§ã€é”„ç­‰ï¼‰
- æ­¦å™¨ï¼ˆå‰‘ã€å¼“ç­‰ï¼‰
- é˜²å…·ï¼ˆæä¾›åŸºç¡€ä¿æŠ¤ï¼‰

### å‡äººAI
è®¾ç½®å‡äººçš„è¡Œä¸ºæ¨¡å¼ï¼š
- **è¢«åŠ¨æ¨¡å¼**ï¼šåªæ‰§è¡ŒåŸºæœ¬ä»»åŠ¡
- **ä¸»åŠ¨æ¨¡å¼**ï¼šä¼šä¸»åŠ¨å¯»æ‰¾ç›®æ ‡
- **é˜²å¾¡æ¨¡å¼**ï¼šä¼šåå‡»æ”»å‡»è€…

## ç®¡ç†åŠŸèƒ½

### å‡äººåˆ—è¡¨
\`\`\`
/player list
\`\`\`
æŸ¥çœ‹æ‰€æœ‰åœ¨çº¿å‡äººã€‚

### å‡äººçŠ¶æ€
\`\`\`
/player [å‡äººå] status
\`\`\`
æŸ¥çœ‹æŒ‡å®šå‡äººçš„è¯¦ç»†çŠ¶æ€ã€‚

### å‡äººä¼ é€
\`\`\`
/tp [å‡äººå]
\`\`\`
ä¼ é€åˆ°æŒ‡å®šå‡äººä½ç½®ã€‚

## æ³¨æ„äº‹é¡¹

1. **åˆç†ä½¿ç”¨**ï¼šä¸è¦æ»¥ç”¨å‡äººç³»ç»Ÿ
2. **æ€§èƒ½è€ƒè™‘**ï¼šè¿‡å¤šå‡äººä¼šå½±å“æœåŠ¡å™¨æ€§èƒ½
3. **å®‰å…¨é˜²æŠ¤**ï¼šå‡äººå¯èƒ½è¢«å…¶ä»–ç©å®¶æ”»å‡»
4. **å®šæœŸæ£€æŸ¥**ï¼šåŠæ—¶æ¸…ç†ä¸éœ€è¦çš„å‡äºº
5. **éµå®ˆè§„åˆ™**ï¼šå‡äººä½¿ç”¨éœ€éµå®ˆæœåŠ¡å™¨è§„åˆ™

å‡äººç³»ç»Ÿæ˜¯å±¯äººæœçš„ç‰¹è‰²åŠŸèƒ½ï¼Œåˆç†ä½¿ç”¨å¯ä»¥å¤§å¤§æå‡æ¸¸æˆæ•ˆç‡å’Œä½“éªŒï¼`,
      slug: 'bot-system',
      categoryName: 'æ¸¸æˆåŠŸèƒ½',
      tags: ['å‡äºº', 'AI', 'è‡ªåŠ¨åŒ–'],
      order: 2
    },
    {
      title: 'APIæ¥å£æ–‡æ¡£',
      content: `# APIæ¥å£æ–‡æ¡£

æœ¬æ–‡æ¡£æè¿°äº†MXacc Wikiç³»ç»Ÿçš„APIæ¥å£ï¼Œä¸ºå¼€å‘è€…æä¾›å®Œæ•´çš„æ¥å£è¯´æ˜ã€‚

## åŸºç¡€ä¿¡æ¯

### åŸºç¡€URL
\`\`\`
https://ä½ çš„åŸŸå/api/wiki
\`\`\`

### è®¤è¯æ–¹å¼
ä½¿ç”¨Bearer Tokenè®¤è¯ï¼š
\`\`\`
Authorization: Bearer <your_token>
\`\`\`

### å“åº”æ ¼å¼
æ‰€æœ‰APIè¿”å›JSONæ ¼å¼ï¼š
\`\`\`json
{
  "success": true,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {}
}
\`\`\`

## å…¬å¼€APIï¼ˆæ— éœ€è®¤è¯ï¼‰

### è·å–Wikié¡µé¢
\`\`\`
GET /api/wiki/content?action=get-page&slug=page-slug
\`\`\`

**å‚æ•°ï¼š**
- \`action\`: å›ºå®šå€¼ "get-page"
- \`slug\`: é¡µé¢URLæ ‡è¯†
- \`pageId\`: é¡µé¢IDï¼ˆå¯é€‰ï¼Œä¸slugäºŒé€‰ä¸€ï¼‰

**å“åº”ï¼š**
\`\`\`json
{
  "success": true,
  "data": {
    "_id": "page_id",
    "title": "é¡µé¢æ ‡é¢˜",
    "content": "é¡µé¢å†…å®¹",
    "slug": "page-slug",
    "category": {
      "_id": "category_id",
      "name": "åˆ†ç±»åç§°"
    },
    "tags": ["æ ‡ç­¾1", "æ ‡ç­¾2"],
    "createdAt": "2024-01-01T00:00:00Z",
    "updatedAt": "2024-01-01T00:00:00Z"
  }
}
\`\`\`

### è·å–åˆ†ç±»åˆ—è¡¨
\`\`\`
GET /api/wiki/content?action=get-categories
\`\`\`

### è·å–é¡µé¢åˆ—è¡¨
\`\`\`
GET /api/wiki/content?action=get-pages&categoryId=xxx&page=1&limit=20
\`\`\`

### æœç´¢é¡µé¢
\`\`\`
GET /api/wiki/content?action=search&search=å…³é”®è¯&page=1&limit=20
\`\`\`

### è·å–å¯¼èˆªç»“æ„
\`\`\`
GET /api/wiki/content?action=get-navigation
\`\`\`

### è·å–æœ€è¿‘æ›´æ–°
\`\`\`
GET /api/wiki/content?action=get-recent&limit=10
\`\`\`

### è·å–ç»Ÿè®¡ä¿¡æ¯
\`\`\`
GET /api/wiki/content?action=get-stats
\`\`\`

## ç®¡ç†APIï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰

### åˆ›å»ºåˆ†ç±»
\`\`\`
POST /api/wiki/management
Content-Type: application/json
Authorization: Bearer <admin_token>

{
  "action": "create-category",
  "name": "åˆ†ç±»åç§°",
  "description": "åˆ†ç±»æè¿°",
  "order": 1
}
\`\`\`

### æ›´æ–°åˆ†ç±»
\`\`\`
PUT /api/wiki/management
Content-Type: application/json
Authorization: Bearer <admin_token>

{
  "action": "update-category",
  "categoryId": "category_id",
  "name": "æ–°åç§°",
  "description": "æ–°æè¿°",
  "order": 2
}
\`\`\`

### åˆ é™¤åˆ†ç±»
\`\`\`
DELETE /api/wiki/management
Content-Type: application/json
Authorization: Bearer <admin_token>

{
  "action": "delete-category",
  "categoryId": "category_id"
}
\`\`\`

### åˆ›å»ºé¡µé¢
\`\`\`
POST /api/wiki/management
Content-Type: application/json
Authorization: Bearer <admin_token>

{
  "action": "create-page",
  "title": "é¡µé¢æ ‡é¢˜",
  "content": "é¡µé¢å†…å®¹ï¼ˆæ”¯æŒMarkdownï¼‰",
  "slug": "page-slug",
  "categoryId": "category_id",
  "tags": ["æ ‡ç­¾1", "æ ‡ç­¾2"],
  "order": 1,
  "published": true
}
\`\`\`

### æ›´æ–°é¡µé¢
\`\`\`
PUT /api/wiki/management
Content-Type: application/json
Authorization: Bearer <admin_token>

{
  "action": "update-page",
  "pageId": "page_id",
  "title": "æ–°æ ‡é¢˜",
  "content": "æ–°å†…å®¹",
  "categoryId": "new_category_id",
  "tags": ["æ–°æ ‡ç­¾"],
  "published": true
}
\`\`\`

### åˆ é™¤é¡µé¢
\`\`\`
DELETE /api/wiki/management
Content-Type: application/json
Authorization: Bearer <admin_token>

{
  "action": "delete-page",
  "pageId": "page_id"
}
\`\`\`

## é”™è¯¯ä»£ç 

| çŠ¶æ€ç  | è¯´æ˜ |
|--------|------|
| 200 | æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | æœªæˆæƒ |
| 403 | æƒé™ä¸è¶³ |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨é”™è¯¯ |

## æ•°æ®ç»“æ„

### é¡µé¢å¯¹è±¡
\`\`\`typescript
interface WikiPage {
  _id: string
  title: string
  content: string
  slug: string
  categoryId?: string
  category?: WikiCategory
  tags: string[]
  order: number
  published: boolean
  createdAt: string
  updatedAt: string
  createdBy: string
  updatedBy: string
}
\`\`\`

### åˆ†ç±»å¯¹è±¡
\`\`\`typescript
interface WikiCategory {
  _id: string
  name: string
  description: string
  order: number
  createdAt: string
  createdBy: string
}
\`\`\`

## ä½¿ç”¨ç¤ºä¾‹

### JavaScript/Fetch
\`\`\`javascript
// è·å–é¡µé¢
const response = await fetch('/api/wiki/content?action=get-page&slug=getting-started')
const data = await response.json()

if (data.success) {
  console.log(data.data.title)
}

// åˆ›å»ºé¡µé¢ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
const createResponse = await fetch('/api/wiki/management', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer ' + token
  },
  body: JSON.stringify({
    action: 'create-page',
    title: 'æ–°é¡µé¢',
    content: '# æ–°é¡µé¢å†…å®¹',
    slug: 'new-page'
  })
})
\`\`\`

### curl
\`\`\`bash
# è·å–é¡µé¢
curl "https://ä½ çš„åŸŸå/api/wiki/content?action=get-page&slug=getting-started"

# åˆ›å»ºé¡µé¢
curl -X POST "https://ä½ çš„åŸŸå/api/wiki/management" \\
  -H "Content-Type: application/json" \\
  -H "Authorization: Bearer YOUR_TOKEN" \\
  -d '{
    "action": "create-page",
    "title": "æ–°é¡µé¢",
    "content": "# é¡µé¢å†…å®¹",
    "slug": "new-page"
  }'
\`\`\`

## é™åˆ¶è¯´æ˜

1. **é¢‘ç‡é™åˆ¶**ï¼šæ¯åˆ†é’Ÿæœ€å¤š100æ¬¡è¯·æ±‚
2. **å†…å®¹é•¿åº¦**ï¼šé¡µé¢å†…å®¹æœ€å¤§100KB
3. **æ ‡ç­¾æ•°é‡**ï¼šæ¯ä¸ªé¡µé¢æœ€å¤š10ä¸ªæ ‡ç­¾
4. **slugæ ¼å¼**ï¼šåªå…è®¸å­—æ¯ã€æ•°å­—ã€è¿å­—ç¬¦å’Œä¸‹åˆ’çº¿

æ›´å¤šæŠ€æœ¯ç»†èŠ‚è¯·è”ç³»å¼€å‘å›¢é˜Ÿã€‚`,
      slug: 'api-documentation',
      categoryName: 'APIæ–‡æ¡£',
      tags: ['API', 'æ–‡æ¡£', 'å¼€å‘'],
      order: 1
    }
  ]
}

async function importWikiData() {
  const client = new MongoClient(process.env.MONGODB_URI || 'mongodb://localhost:27017')
  
  try {
    await client.connect()
    console.log('è¿æ¥åˆ°MongoDBæˆåŠŸ')
    
    const db = client.db('mxacc')
    const categoriesCollection = db.collection('wiki_categories')
    const pagesCollection = db.collection('wiki_pages')
    
    // æ¸…ç©ºç°æœ‰æ•°æ®
    await categoriesCollection.deleteMany({})
    await pagesCollection.deleteMany({})
    console.log('æ¸…ç©ºç°æœ‰Wikiæ•°æ®')
    
    // å¯¼å…¥åˆ†ç±»
    const categoryMap = {}
    for (const categoryData of wikiData.categories) {
      const category = {
        ...categoryData,
        createdAt: new Date(),
        createdBy: 'system'
      }
      
      const result = await categoriesCollection.insertOne(category)
      categoryMap[categoryData.name] = result.insertedId
      console.log(`åˆ›å»ºåˆ†ç±»: ${categoryData.name}`)
    }
    
    // å¯¼å…¥é¡µé¢
    for (const pageData of wikiData.pages) {
      const page = {
        title: pageData.title,
        content: pageData.content,
        slug: pageData.slug,
        categoryId: categoryMap[pageData.categoryName],
        tags: pageData.tags,
        order: pageData.order,
        published: true,
        createdAt: new Date(),
        updatedAt: new Date(),
        createdBy: 'system',
        updatedBy: 'system'
      }
      
      await pagesCollection.insertOne(page)
      console.log(`åˆ›å»ºé¡µé¢: ${pageData.title}`)
    }
    
    console.log('Wikiæ•°æ®å¯¼å…¥å®Œæˆï¼')
    console.log(`- å¯¼å…¥äº† ${wikiData.categories.length} ä¸ªåˆ†ç±»`)
    console.log(`- å¯¼å…¥äº† ${wikiData.pages.length} ä¸ªé¡µé¢`)
    
  } catch (error) {
    console.error('å¯¼å…¥æ•°æ®æ—¶å‡ºé”™:', error)
  } finally {
    await client.close()
  }
}

// å¦‚æœç›´æ¥è¿è¡Œæ­¤è„šæœ¬
if (require.main === module) {
  importWikiData()
}

module.exports = { importWikiData, wikiData } 